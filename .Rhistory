neko_utf8 <- "吾輩は猫である。名前はまだ無い。"
neko_utf8
neko_utf8 <- iconv(neko_utf8, from="cp932", to="utf-8")
neko_utf8
usethis::use_data(neko_utf8, overwrite = TRUE)
library(moranajp)
data(neko_sjis)
data(neko_utf8)
neko_sjis
neko_utf8
iconv(neko_utf8, from="utf-8", to="cp932")
?shell
?shell
system
?system
shell
library(moranajp)
library(moranajp)
library(tidyverse)
library(magrittr)
data(neko)
# neko$text <- iconv(neko$text, from="cp932", to="utf-8")# Mac, LinuxなどUTF-8の場合
neko
# Directory of mecab
# No need when setting path to mecab
# MeCabの実行ファイルのディレクトリ
# pathがとおっている場合は，設定不要
bin_dir <- "c:/MeCab/bin"  # set your environment
# Fileencoding in mecab. "CP932" (shift_jis) , "UTF-8" or "EUC"
# MeCab.exeの文字コード
fileEncoding <- "CP932"  # set your environment
bin_dir <- "d:/pf/MeCab/bin"  # set your environment
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding)
mecab
library(moranajp)
library(tidyverse)
library(magrittr)
data(neko)
# neko$text <- iconv(neko$text, from="cp932", to="utf-8")# Mac, LinuxなどUTF-8の場合
neko
# Directory of mecab
# No need when setting path to mecab
# MeCabの実行ファイルのディレクトリ
# pathがとおっている場合は，設定不要
bin_dir <- "c:/MeCab/bin"  # set your environment
# Fileencoding in mecab. "CP932" (shift_jis) , "UTF-8" or "EUC"
# MeCab.exeの文字コード
fileEncoding <- "CP932"  # set your environment
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
bin_dir <- "d:/fp/MeCab/bin"
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
bin_dir <- "d:/pg/MeCab/bin"
bin_dir <- "d:/pf/MeCab/bin"
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
tmp_dir < -NULL
str_c(NULL, "a")
library(moranajp)
library(tidyverse)
library(magrittr)
data(neko)
neko
# Directory of mecab
# No need when setting path to mecab
# MeCabの実行ファイルのディレクトリ
# pathがとおっている場合は，設定不要
bin_dir <- "c:/MeCab/bin/"  # set your environment
# Fileencoding in mecab. "CP932" (shift_jis) , "UTF-8" or "EUC"
# MeCabの文字コード
fileEncoding <- "CP932"  # set your environment
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
bin_dir <- "d:/fp/MeCab/bin/"  # se
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
bin_dir <- "d:/pf/MeCab/bin/"  # se
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
mecab
tmp_dir <- null
tmp_dir <- NULL
NULL
tmp_dir
bin_dir
if(tmp_dir) tmp_dir <- bin_dir
if(tmp_dir)
1 else2
is.null(tmp_dir)
if(is.null(tmp_dir)) tmp_dir <- bin_dir
tmp_dir
library(moranajp)
library(tidyverse)
library(moranajp)
library(tidyverse)
library(magrittr)
data(neko)
neko
# Directory of mecab
# No need when setting path to mecab
# MeCabの実行ファイルのディレクトリ
# pathがとおっている場合は，設定不要
bin_dir <- "c:/MeCab/bin/"  # set your environment
# Fileencoding in mecab. "CP932" (shift_jis) , "UTF-8" or "EUC"
# MeCabの文字コード
fileEncoding <- "CP932"  # set your environment
bin_dir <- "d:/pf/MeCab/bin/"
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
mecab()
mecab
out_cols
out_col
res
colnames(res[1:10]) <- 1:10
res
colnames(res[1:10])
colnames(res[1:10]) <- letters[1:10]
res
c("表層形", "品詞", "品詞細分類1", "品詞細分類2", "品詞細分類3", "活用型", "活用形", "原形", "読み", "発音", colnames(11:ncol(res)))
colnames(11:ncol(res))
res
colnames(res)[11:ncol(res)]
c("表層形", "品詞", "品詞細分類1", "品詞細分類2", "品詞細分類3", "活用型", "活用形", "原形", "読み", "発音", colnames(res)[11:ncol(res)])
colnames(res) <- c(letters[1:10], colnames(res)[11:ncol(res)])
res
colnames(res) <- c("表層形", "品詞", "品詞細分類1", "品詞細分類2", "品詞細分類3", "活用型", "活用形", "原形", "読み", "発音", colnames(res)[11:ncol(res)])
res
out_cols
out_cols <- c("表層形", "品詞", "品詞細分類1", "品詞細分類2", "品詞細分類3", "活用型", "活用形", "原形", "読み", "発音",
)
out_cols <- c("表層形", "品詞", "品詞細分類1", "品詞細分類2", "品詞細分類3", "活用型", "活用形", "原形", "読み", "発音")
out_cols
stringi::stri_escape_unicode(out_cols)
cat(stringi::stri_escape_unicode(out_cols))
out_cols <- c("\u8868\u5c64\u5f62", "\u54c1\u8a5e", "\u54c1\u8a5e\u7d30\u5206\u985e1",
"\u54c1\u8a5e\u7d30\u5206\u985e2", "\u54c1\u8a5e\u7d30\u5206\u985e3", "\u6d3b\u7528\u578b",
"\u6d3b\u7528\u5f62", "\u539f\u5f62", "\u8aad\u307f", "\u767a\u97f3")
out_cols
library(moranajp)
data(neko)
neko
library(moranajp)
library(tidyverse)
library(magrittr)
data(neko)
neko
bin_dir <- "d:/pf/MeCab/bin/"  #
fileEncoding <- "CP932"  # set your environment
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
library(moranajp)
library(moranajp)
library(tidyverse)
library(magrittr)
data(neko)
neko
# Directory of mecab
# No need when setting path to mecab
# MeCabの実行ファイルのディレクトリ
# pathがとおっている場合は，設定不要
bin_dir <- "c:/MeCab/bin/"  # set your environment
# Fileencoding in mecab. "CP932" (shift_jis) , "UTF-8" or "EUC"
# MeCabの文字コード
fileEncoding <- "CP932"  # set your environment
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
bin_dir <- "d:/pf/MeCab/bin/"  # s
res <-
neko %>%
mutate(cols=rep(1:2, each=2)) %>%
mecab_all(text_col="text", bin_dir=bin_dir, fileEncoding=fileEncoding) %>%
print(n=nrow(.))
library(moranajp)
neko
data(neko)
neko
neko
neko$text
neko[[1]]
neko[1]
neko[1,]
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
neko
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
stringr::str_detect
neko
str_c(neko$text)
stringr::str_c(neko$text)
?stringr::str_c(neko$text)
stringr::str_c(neko$text, collapse=FALSE)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
tbl <- neko
tbl
tbl <- tbl %>% dplyr::mutate(text_id=1:nrow(tbl))
tbl
if(stringr::str_detect(stringr::str_c(tbl$text_col, collaspe=FALSE), "\\r\\n")) warning("removed line breaks !")
if(stringr::str_detect(stringr::str_c(tbl$text_col, collaspe=FALSE), "\\n")) warning("removed line breaks !")
stringr::str_c(tbl$text_col, collaspe=FALSE)
tbl <- neko
text_col = "text"
tmp_dir = "d:/pf/mecab/bin"
fileEncoding = "CP932
""
fileEncoding = "CP932"
fileEncoding = "CP932"
tbl <- tbl %>% dplyr::mutate(text_id=1:nrow(tbl))
others <- dplyr::select(tbl, !dplyr::all_of(text_col))
if(stringr::str_detect(stringr::str_c(tbl$text_col, collaspe=FALSE), "\\r\\n")) warning("removed line breaks !")
if(stringr::str_detect(stringr::str_c(tbl$text_col, collaspe=FALSE), "\\n")) warning("removed line breaks !")
tbl$text_col
text_col
tbl
tbl$"text"
tbl[[text_col]]
if(stringr::str_detect(stringr::str_c(tbl[[text_col]], collaspe=FALSE), "\\r\\n")) warning("removed line breaks !")
if(stringr::str_detect(stringr::str_c(tbl[[text_col]], collaspe=FALSE), "\\n"))    warning("removed line breaks !")
stringr::str_c(tbl[[text_col]], collaspe=FALSE)
if(stringr::str_detect(stringr::str_c(tbl[[text_col]], collapse=FALSE), "\\r\\n")) warning("removed line breaks !")
if(stringr::str_detect(stringr::str_c(tbl[[text_col]], collapse=FALSE), "\\n"))    warning("removed line breaks !")
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
neko[1,]
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin/"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
a
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin/"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin/"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
?note
caution
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin/"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
library(moranajp)
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin/"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
neko
neko %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(!!text_col, "\\r\\n", "")) %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(!!text_col, "\\n", ""))
text_col
neko %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(text_col, "\\r\\n", "")) %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(text_col, "\\n", ""))
neko %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(all_of(text_col), "\\r\\n", "")) %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(all_of(text_col), "\\n", ""))
neko %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(.data[[text_col]], "\\r\\n", "")) %>%
dplyr::mutate(!!text_col := stringr::str_replace_all(.data[[text_col]], "\\n", ""))
library(moranajp)
neko[1,] <- "吾輩は猫である。\n名前はまだ無い。"
bin_dir <- "d:/pf/mecab/bin/"
fileEncoding <- "CP932"
mecab_all(neko, bin_dir=bin_dir, fileEncoding=fileEncoding)
a
library(tidyverse)
:=
?`:=`
`.data`
?`.data`
use_build_ignore
usethis::use_build_ignore
?usethis::use_build_ignore
usethis::use_build_ignore("zip")
# ref. # stringi::stri_escape_unicode()
out_cols <- c("\u8868\u5c64\u5f62", "\u54c1\u8a5e", "\u54c1\u8a5e\u7d30\u5206\u985e1",
"\u54c1\u8a5e\u7d30\u5206\u985e2", "\u54c1\u8a5e\u7d30\u5206\u985e3", "\u6d3b\u7528\u578b",
"\u6d3b\u7528\u5f62", "\u539f\u5f62", "\u8aad\u307f", "\u767a\u97f3")
stringi::stri_escape_unicode(out_cols)
stringi::stri_unescape_unicode(out_cols)
library(rvest)
read_html("https://www.konekono-heya.com/books/wagahai1.html")
a <- read_html("https://www.konekono-heya.com/books/wagahai1.html")
a[2]
stt(a)
stt(a)
stt(a)
str(a)
str(a$doc)
str(a$node)
html_elements(a, "section")
html_elements(a, "body")
html_elements(a, "bunsyou")
html_elements(a, "body")
neko <- read_html("https://www.konekono-heya.com/books/wagahai1.html") %>%
neko %>%
html_element("body") %>%
html_text2()
neko <- read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko %>%
html_element("body") %>%
html_text2()
?stringr::str_split
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r\\n")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
as.list()
neko[1:10]
neko[1]
neko[[1]]
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
list()
neko[[1]]
neko[[1]][1]
neko[[1]][1]
str(neko)
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n")
str(neko)
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n")[[1]]
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]]
neko
neko[1]
neko[13]
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
[14:length(.)]
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[14:length(.)]
neko
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko <-
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[13]
neko
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[13:length(.)] %>%
tibble(text=.)
library(rvest)
library(tidyverse)
neko <- rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html")
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[13:length(.)] %>%
tibble::tibble(text=.)
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[13:length(.)] %>%
tibble::tibble(text=.) %>%
dplyr::filter(text!="")
library(rvest)
library(tidyverse)
neko <-
rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html") %>%
neko %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[13:length(.)] %>%
tibble::tibble(text=.) %>%
dplyr::filter(text!="")
neko <-
rvest::read_html("https://www.konekono-heya.com/books/wagahai1.html") %>%
rvest::html_element("body") %>%
rvest::html_text2() %>%
stringr::str_split("\\r|\\n") %>%
.[[1]] %>%
.[13:length(.)] %>%
tibble::tibble(text=.) %>%
dplyr::filter(text!="")
neko <-
rvest::read_html("https://www.aozora.gr.jp/cards/000148/files/789_14547.html") %>%
rvest::html_element("body") %>%
rvest::html_text2()
neko
neko <-
rvest::read_html("http://sybrma.sakura.ne.jp/42souseki.neko.html") %>%
rvest::html_element("body") %>%
rvest::html_text2()
neko <-
rvest::read_html("http://sybrma.sakura.ne.jp/42souseki.neko.html") %>%
rvest::html_element("TBODY") %>%
rvest::html_text2()
usethis::use_vignette("howtouse")
